(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{212:function(e,t,a){"use strict";var r=a(3),n=a(4),o=a(7),i=a(6),s=a(8),l=a(0),c=a.n(l),u=a(18),m=a.n(u),d=a(221),p=a.n(d),f=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).state={shareButton:!1},a.shareLink=function(e){navigator.share&&navigator.share({url:e.link}).then(function(){return console.log("Successful share")}).catch(function(e){return console.log("Error sharing",e)})},a}return Object(s.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){navigator.share&&this.setState({shareButton:!0})}},{key:"render",value:function(){var e=this;return c.a.createElement(c.a.Fragment,null,this.state.shareButton&&c.a.createElement("button",{type:"button",className:"btn search-navs-btns nav-home-btn",style:{position:"relative"},onClick:function(){return e.shareLink(e.props)}},c.a.createElement("i",{className:"si si-share"}),c.a.createElement(m.a,{duration:"500"})))}}]),t}(l.Component),g=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"col-12 p-0 fixed",style:{zIndex:"9"}},c.a.createElement("div",{className:"block m-0"},c.a.createElement("div",{className:"block-content p-0 ".concat(this.props.dark&&"nav-dark")},c.a.createElement("div",{className:"input-group ".concat(this.props.boxshadow&&"search-box")},!this.props.disable_back_button&&c.a.createElement("div",{className:"input-group-prepend"},this.props.back_to_home&&c.a.createElement("button",{type:"button",className:"btn search-navs-btns",style:{position:"relative"},onClick:function(){setTimeout(function(){e.context.router.history.push("/")},200)}},c.a.createElement("i",{className:"si si-arrow-left"}),c.a.createElement(m.a,{duration:"500"})),this.props.goto_orders_page&&c.a.createElement("button",{type:"button",className:"btn search-navs-btns",style:{position:"relative"},onClick:function(){setTimeout(function(){e.context.router.history.push("/my-orders")},200)}},c.a.createElement("i",{className:"si si-arrow-left"}),c.a.createElement(m.a,{duration:"500"})),this.props.goto_accounts_page&&c.a.createElement("button",{type:"button",className:"btn search-navs-btns",style:{position:"relative"},onClick:function(){setTimeout(function(){e.context.router.history.push("/my-account")},200)}},c.a.createElement("i",{className:"si si-arrow-left"}),c.a.createElement(m.a,{duration:"500"})),!this.props.back_to_home&&!this.props.goto_orders_page&&!this.props.goto_accounts_page&&c.a.createElement("button",{type:"button",className:"btn search-navs-btns ".concat(this.props.dark&&"nav-dark"),style:{position:"relative"},onClick:function(){setTimeout(function(){e.context.router.history.goBack()},200)}},c.a.createElement("i",{className:"si si-arrow-left"}),c.a.createElement(m.a,{duration:"500"}))),c.a.createElement("p",{className:"form-control search-input d-flex align-items-center ".concat(this.props.dark&&"nav-dark")},this.props.logo&&c.a.createElement("img",{src:"/assets/img/logos/logo.png",alt:localStorage.getItem("storeName"),width:"120"}),this.props.has_title?c.a.createElement(c.a.Fragment,null,this.props.from_checkout?c.a.createElement("span",{className:"nav-page-title"},localStorage.getItem("cartToPayText")," ",c.a.createElement("span",{style:{color:localStorage.getItem("storeColor")}},"left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),this.props.title,"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"))):c.a.createElement("span",{className:"nav-page-title"},this.props.title)):null,this.props.has_delivery_icon&&c.a.createElement(p.a,{left:!0},c.a.createElement("img",{src:"/assets/img/various/delivery-bike.png",alt:this.props.title,className:"nav-page-title"}))),this.props.has_restaurant_info?c.a.createElement("div",{className:"fixed-restaurant-info hidden",ref:function(t){e.heading=t}},c.a.createElement("span",{className:"font-w700 fixedRestaurantName"},this.props.restaurant.name),c.a.createElement("br",null),c.a.createElement("span",{className:"font-w400 fixedRestaurantTime"},c.a.createElement("i",{className:"si si-clock"})," ",this.props.restaurant.delivery_time," ",localStorage.getItem("homePageMinsText"))):null,c.a.createElement("div",{className:"input-group-append"},!this.props.disable_search&&c.a.createElement("button",{type:"submit",className:"btn search-navs-btns",style:{position:"relative"}},c.a.createElement("i",{className:"si si-magnifier"}),c.a.createElement(m.a,{duration:"500"})),this.props.homeButton&&c.a.createElement("button",{type:"button",className:"btn search-navs-btns nav-home-btn",style:{position:"relative"},onClick:function(){setTimeout(function(){e.context.router.history.push("/")},200)}},c.a.createElement("i",{className:"si si-home"}),c.a.createElement(m.a,{duration:"500"})),this.props.shareButton&&c.a.createElement(f,{link:window.location.href})))))))}}]),t}(l.Component);g.contextTypes={router:function(){return null}};t.a=g},218:function(e,t,a){"use strict";function r(e,t){var a=t.left,r=t.right,n=t.up,o=t.down,i=t.top,s=t.bottom,l=t.big,u=t.mirror,d=t.opposite,p=(a?1:0)|(r?2:0)|(i||o?4:0)|(s||n?8:0)|(u?16:0)|(d?32:0)|(e?64:0)|(l?128:0);if(m.hasOwnProperty(p))return m[p];if(!u!=!(e&&d)){var f=[r,a,s,i,o,n];a=f[0],r=f[1],i=f[2],s=f[3],n=f[4],o=f[5]}var g=l?"2000px":"100%",v=a?"-"+g:r?g:"0",h=o||i?"-"+g:n||s?g:"0";return m[p]=(0,c.animation)("\n    "+(e?"to":"from")+" {opacity: 0;transform: translate3d("+v+", "+h+", 0) rotate3d(0, 0, 1, -120deg);}\n\t  "+(e?"from":"to")+" {opacity: 1;transform: none}\n  "),m[p]}function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.defaults,t=e.children,a=(e.out,e.forever),n=e.timeout,o=e.duration,i=void 0===o?c.defaults.duration:o,l=e.delay,u=void 0===l?c.defaults.delay:l,m=e.count,d=void 0===m?c.defaults.count:m,p=function(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}(e,["children","out","forever","timeout","duration","delay","count"]),f={make:r,duration:void 0===n?i:n,delay:u,forever:a,count:d,style:{animationFillMode:"both"}};return(0,s.default)(p,f,f,t)}Object.defineProperty(t,"__esModule",{value:!0});var o,i=a(76),s=(o=i)&&o.__esModule?o:{default:o},l=a(2),c=a(57),u={out:l.bool,left:l.bool,right:l.bool,top:l.bool,bottom:l.bool,big:l.bool,mirror:l.bool,opposite:l.bool,duration:l.number,timeout:l.number,delay:l.number,count:l.number,forever:l.bool},m={};n.propTypes=u,t.default=n,e.exports=t.default},221:function(e,t,a){"use strict";function r(e,t){var a=t.left,r=t.right,n=t.mirror,o=t.opposite,i=(a?1:0)|(r?2:0)|(n?16:0)|(o?32:0)|(e?64:0);if(m.hasOwnProperty(i))return m[i];if(!n!=!(e&&o)){var s=[r,a];a=s[0],r=s[1]}var l=a?"-100%":r?"100%":"0",u=e?"from {\n        opacity: 1;\n      }\n      to {\n        transform: translate3d("+l+", 0, 0) skewX(30deg);\n        opacity: 0;\n      }\n    ":"from {\n        transform: translate3d("+l+", 0, 0) skewX(-30deg);\n        opacity: 0;\n      }\n      60% {\n        transform: skewX(20deg);\n        opacity: 1;\n      }\n      80% {\n        transform: skewX(-5deg);\n        opacity: 1;\n      }\n      to {\n        transform: none;\n        opacity: 1;\n      }";return m[i]=(0,c.animation)(u),m[i]}function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.defaults,t=e.children,a=(e.out,e.forever),n=e.timeout,o=e.duration,i=void 0===o?c.defaults.duration:o,l=e.delay,u=void 0===l?c.defaults.delay:l,m=e.count,d=void 0===m?c.defaults.count:m,p=function(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}(e,["children","out","forever","timeout","duration","delay","count"]),f={make:r,duration:void 0===n?i:n,delay:u,forever:a,count:d,style:{animationFillMode:"both"}};return p.left,p.right,p.mirror,p.opposite,(0,s.default)(p,f,f,t)}Object.defineProperty(t,"__esModule",{value:!0});var o,i=a(76),s=(o=i)&&o.__esModule?o:{default:o},l=a(2),c=a(57),u={out:l.bool,left:l.bool,right:l.bool,mirror:l.bool,opposite:l.bool,duration:l.number,timeout:l.number,delay:l.number,count:l.number,forever:l.bool},m={};n.propTypes=u,t.default=n,e.exports=t.default},224:function(e,t,a){var r;!function(){"use strict";var a={}.hasOwnProperty;function n(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)&&r.length){var i=n.apply(null,r);i&&e.push(i)}else if("object"===o)for(var s in r)a.call(r,s)&&r[s]&&e.push(s)}}return e.join(" ")}"undefined"!==typeof e&&e.exports?(n.default=n,e.exports=n):void 0===(r=function(){return n}.apply(t,[]))||(e.exports=r)}()},250:function(e,t,a){"use strict";a.d(t,"c",function(){return l}),a.d(t,"a",function(){return c}),a.d(t,"b",function(){return u});var r=a(63),n=a(15),o=a(9),i=a(5),s=a.n(i),l=function(e){return function(t){return s.a.get(o.J+"/"+e).then(function(e){var a=e.data.restaurant,o=e.data.reviews;return[t({type:n.b,payload:a}),t({type:r.c,payload:o})]}).catch(function(e){console.log(e)})}},c=function(e){return function(t){return s.a.post(o.b,{order_id:e.order_id,token:e.auth_token,rating_store:e.rating_store,rating_delivery:e.rating_delivery,review_store:e.review_store,review_delivery:e.review_delivery}).then(function(e){var a=e.data;return t({type:r.a,payload:a})}).catch(function(e){console.log(e)})}},u=function(e,t){return function(a){s.a.post(o.C,{order_id:e,token:t}).then(function(e){var t=e.data;return a({type:r.b,payload:t})}).catch(function(e){console.log(e)})}}},307:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),n=a(0),o=l(n),i=l(a(2)),s=l(a(224));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={value:e.value},a}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n.Component),r(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.value;null!=t&&t!==this.state.value&&this.setState({value:t})}},{key:"onChange",value:function(e){var t=this.props,a=t.editing,r=t.value;a&&null==r&&this.setState({value:e})}},{key:"onStarClick",value:function(e,t,a,r){r.stopPropagation();var n=this.props,o=n.onStarClick;n.editing&&o&&o(e,t,a,r)}},{key:"onStarHover",value:function(e,t,a,r){r.stopPropagation();var n=this.props,o=n.onStarHover;n.editing&&o&&o(e,t,a,r)}},{key:"onStarHoverOut",value:function(e,t,a,r){r.stopPropagation();var n=this.props,o=n.onStarHoverOut;n.editing&&o&&o(e,t,a,r)}},{key:"renderStars",value:function(){for(var e=this,t=this.props,a=t.name,r=t.starCount,n=t.starColor,i=t.emptyStarColor,s=t.editing,l=this.state.value,c=function(e,t){return{float:"right",cursor:s?"pointer":"default",color:t>=e?n:i}},u={display:"none",position:"absolute",marginLeft:-9999},m=[],d=function(t){var r=a+"_"+t,n=o.default.createElement("input",{key:"input_"+r,style:u,className:"dv-star-rating-input",type:"radio",name:a,id:r,value:t,checked:l===t,onChange:e.onChange.bind(e,t,a)}),i=o.default.createElement("label",{key:"label_"+r,style:c(t,l),className:"dv-star-rating-star "+(l>=t?"dv-star-rating-full-star":"dv-star-rating-empty-star"),htmlFor:r,onClick:function(r){return e.onStarClick(t,l,a,r)},onMouseOver:function(r){return e.onStarHover(t,l,a,r)},onMouseLeave:function(r){return e.onStarHoverOut(t,l,a,r)}},e.renderIcon(t,l,a,r));m.push(n),m.push(i)},p=r;p>0;p--)d(p);return m.length?m:null}},{key:"renderIcon",value:function(e,t,a,r){var n=this.props,i=n.renderStarIcon,s=n.renderStarIconHalf;return"function"===typeof s&&Math.ceil(t)===e&&t%1!==0?s(e,t,a,r):"function"===typeof i?i(e,t,a,r):o.default.createElement("i",{key:"icon_"+r,style:{fontStyle:"normal"}},"\u2605")}},{key:"render",value:function(){var e=this.props,t=e.editing,a=e.className,r=(0,s.default)("dv-star-rating",{"dv-star-rating-non-editable":!t},a);return o.default.createElement("div",{style:{display:"inline-block",position:"relative"},className:r},this.renderStars())}}]),t}();c.propTypes={name:i.default.string.isRequired,value:i.default.number,editing:i.default.bool,starCount:i.default.number,starColor:i.default.string,onStarClick:i.default.func,onStarHover:i.default.func,onStarHoverOut:i.default.func,renderStarIcon:i.default.func,renderStarIconHalf:i.default.func},c.defaultProps={starCount:5,editing:!0,starColor:"#ffb400",emptyStarColor:"#333"},t.default=c,e.exports=t.default},329:function(e,t,a){"use strict";a.r(t),a.d(t,"RateAndReview",function(){return S});var r=a(50),n=a(3),o=a(4),i=a(7),s=a(6),l=a(8),c=a(0),u=a.n(c),m=a(307),d=a.n(m),p=a(250),f=a(16),g=a(212),v=a(356),h=a(13),b=a(18),y=a.n(b),_=a(43),E=a(218),k=a.n(E),S=function(e){function t(){var e,a;Object(n.a)(this,t);for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(l)))).state={order_id:"",loading:!1,rating_store:0,rating_delivery:0,review_store:"",review_delivery:"",required_error:!1,completed:!1,rating_delivery_icon:"",rating_store_icon:""},a.onDeliveryRating=function(e,t,r){switch(a.setState({rating_delivery:e}),e){case 5:a.setState({rating_delivery_icon:"rating-5.png"});break;case 4:a.setState({rating_delivery_icon:"rating-4.png"});break;case 3:a.setState({rating_delivery_icon:"rating-3.png"});break;case 2:a.setState({rating_delivery_icon:"rating-2.png"});break;case 1:a.setState({rating_delivery_icon:"rating-1.png"})}},a.renderDeliveryReviewIcon=function(){return u.a.createElement(k.a,{bottom:!0},u.a.createElement("img",{src:"/assets/img/various/".concat(a.state.rating_delivery_icon),alt:"review",className:"img-fluid review-icon"}))},a.renderStoreReviewIcon=function(){return u.a.createElement(k.a,{bottom:!0},u.a.createElement("img",{src:"/assets/img/various/".concat(a.state.rating_store_icon),alt:"review",className:"img-fluid review-icon"}))},a.onStoreRating=function(e,t,r){switch(a.setState({rating_store:e}),e){case 5:a.setState({rating_store_icon:"rating-5.png"});break;case 4:a.setState({rating_store_icon:"rating-4.png"});break;case 3:a.setState({rating_store_icon:"rating-3.png"});break;case 2:a.setState({rating_store_icon:"rating-2.png"});break;case 1:a.setState({rating_store_icon:"rating-1.png"})}},a.feedbackComment=function(e){e.preventDefault(),a.setState(Object(r.a)({},e.target.name,e.target.value))},a.submitRating=function(){0===a.state.rating_store||0===a.state.rating_delivery?a.setState({required_error:!0}):(a.setState({loading:!0}),a.props.addRating(a.state).then(function(e){console.log(e),console.log("here 1"),e&&e.payload.success&&a.context.router.history.goBack()}),a.setState({restaurant_rating:0,delivery_rating:0,comment:""}))},a}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.setState({order_id:this.props.match.params.id}),this.props.user.success&&(this.setState({user_id:this.props.user.data.id,auth_token:this.props.user.data.auth_token}),this.props.getOrderDetails(this.props.match.params.id,this.props.user.data.auth_token))}},{key:"componentWillReceiveProps",value:function(e){this.props.order!==e.order&&(this.setState({loading:!1}),null!==e.order.rating&&this.context.router.history.push("/"))}},{key:"render",value:function(){var e=this.state,t=e.rating_store,a=e.rating_delivery;return window.innerWidth>768?u.a.createElement(v.a,{to:"/"}):null===localStorage.getItem("storeColor")?u.a.createElement(v.a,{to:"/"}):this.props.user.success?u.a.createElement(u.a.Fragment,null,u.a.createElement(_.a,{seotitle:localStorage.getItem("rarModRatingPageTitle"),seodescription:localStorage.getItem("seoMetaDescription"),ogtype:"website",ogtitle:localStorage.getItem("seoOgTitle"),ogdescription:localStorage.getItem("seoOgDescription"),ogurl:window.location.href,twittertitle:localStorage.getItem("seoTwitterTitle"),twitterdescription:localStorage.getItem("seoTwitterDescription")}),this.state.required_error&&u.a.createElement("div",{className:"auth-error mb-50"},u.a.createElement("div",{className:"error-shake"},localStorage.getItem("ratingsRequiredMessage"))),this.state.loading&&u.a.createElement(h.a,null),u.a.createElement("div",{className:"col-12 p-0 mb-5"},u.a.createElement(g.a,{boxshadow:!0,has_title:!0,title:localStorage.getItem("rarModRatingPageTitle"),disable_search:!0,goto_accounts_page:!0})),this.state.completed?u.a.createElement("div",{className:"d-flex justify-content-center pt-80"},u.a.createElement("img",{src:"/assets/img/order-placed.gif",alt:"Completed",className:"img-fluid w-50"})):u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"block-content block-content-full pt-80 px-15"},u.a.createElement("form",{className:"rating-form"},u.a.createElement("div",{className:"pt-30"},u.a.createElement("div",{className:"d-flex justify-content-between"},u.a.createElement("div",{className:"form-group mb-0"},u.a.createElement("label",{className:"col-12 text-muted"},localStorage.getItem("rarModDeliveryRatingTitle")),u.a.createElement("div",{className:"col-md-9 pb-5"},u.a.createElement(d.a,{name:"rating_delivery",starCount:5,value:a,onStarClick:this.onDeliveryRating}))),u.a.createElement("div",null,this.state.rating_delivery_icon&&this.renderDeliveryReviewIcon())),u.a.createElement("div",{className:"form-group mb-0"},u.a.createElement("label",{className:"col-12 text-muted"},localStorage.getItem("rarReviewBoxTitleDeliveryFeedback")),u.a.createElement("div",{className:"col-md-9 pb-5"},u.a.createElement("textarea",{placeholder:localStorage.getItem("rarReviewBoxTextPlaceHolderText"),value:this.state.review_delivery,onChange:this.feedbackComment,className:"feedback-textarea",name:"review_delivery"})))),u.a.createElement("hr",{className:"mt-20"}),u.a.createElement("div",{className:"pt-10"},u.a.createElement("div",{className:"d-flex justify-content-between"},u.a.createElement("div",{className:"form-group mb-0"},u.a.createElement("label",{className:"col-12 text-muted"},localStorage.getItem("rarModRestaurantRatingTitle")),u.a.createElement("div",{className:"col-md-9 pb-5"},u.a.createElement(d.a,{name:"rating_store",starCount:5,value:t,onStarClick:this.onStoreRating}))),u.a.createElement("div",null,this.state.rating_store_icon&&this.renderStoreReviewIcon())),u.a.createElement("div",{className:"form-group mb-0"},u.a.createElement("label",{className:"col-12 text-muted"},localStorage.getItem("rarReviewBoxTitleStoreFeedback")),u.a.createElement("div",{className:"col-md-9 pb-5"},u.a.createElement("textarea",{placeholder:localStorage.getItem("rarReviewBoxTextPlaceHolderText"),value:this.state.review_store,onChange:this.feedbackComment,className:"feedback-textarea",name:"review_store"})))),u.a.createElement("button",{className:"btn-fixed-bottom",style:{backgroundColor:localStorage.getItem("storeColor")},onClick:this.submitRating,type:"button"},localStorage.getItem("rarSubmitButtonText"),u.a.createElement(y.a,{duration:250})))),u.a.createElement("div",{className:"mb-100"}))):u.a.createElement(v.a,{to:"/login"})}}]),t}(c.Component);S.contextTypes={router:function(){return null}};t.default=Object(f.b)(function(e){return{user:e.user.user,order:e.rating.order}},{addRating:p.a,getOrderDetails:p.b})(S)}}]);